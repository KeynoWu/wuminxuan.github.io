<html lang="zh-cn">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>ANSONæ€ç»´</title>
		<meta name="keywords" content="ANSON,æ€ç»´,ANSONæ€ç»´,IOS,ios,h5,Jquery,åšå®¢,æ–‡æ¡£,åˆ†äº«">
		<meta name="description" content="ios&html5æ··åˆå¼€å‘ä¼˜åŒ–">
		<meta name="baidu-site-verification" content="4IXNpgHm1T" />
		<meta http_equiv="pragma" content="no-cache">
		<meta http_equiv="Cache-Control" content="no-cache, must-revalidate">
		<link rel="shortcut icon" href="../images/logo.ico">
		<link rel="icon" href="../images/logo.ico">
		<style>
			body,
			ul,
			li {
				margin: 0px;
				padding: 0px;
				list-style: none;
				font-size: 12px;
			}
			
			body {
				margin: 100px 20%;
			}
			.hljs.objectivec,.hljs.xml,.hljs.javascript{
				overflow-x: overlay;
			}
		</style>
	</head>

	<body>
		<h1 class="title" style="font-size: 34px; margin-bottom: 0px; font-family: -apple-system, &quot;SF UI Display&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-weight: 700; line-height: 1.3; color: rgb(51, 51, 51); caret-color: rgb(51, 51, 51); text-size-adjust: auto; word-break: break-word !important;">ios&amp;html5æ··åˆå¼€å‘ä¼˜åŒ–ï¼ˆäºŒï¼‰</h1>
		<div id="free-reward-panel" class="support-author" style="min-height: 144px; padding: 20px 0px; text-align: center; clear: both; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: 17px; text-size-adjust: auto;">
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">ä¼˜åŒ–ocä¸jsä¼ å€¼</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">æ··åˆå¼€å‘æœ€å¤§çš„é—®é¢˜å°±åœ¨äºå‰å°ä¸åå°ç›´æ¥çš„é€šä¿¡ï¼Œè¿™ä¸ªä¸åƒç”¨çº¯åŸç”Ÿå¼€å‘æ—¶æ•°æ®éƒ½ä»æ¥å£å¤„è·å–ç„¶ååšæƒ³è¦çš„æ“ä½œï¼Œæ··åˆå¼€å‘ä¸­ocç«¯æ˜¯æ²¡æœ‰åŠæ³•å»æ“ä½œé¡µé¢çš„ï¼Œå› ä¸ºé¡µé¢æ˜¯h5åšçš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ocä¸jsè¿›è¡Œé€šä¿¡ã€‚<br>ocä¸jsé€šä¿¡çš„æ–¹æ³•æ€»ç»“äº†ä¸‹å¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§ï¼š<br>1ã€æœ‰å¾ˆå¤šçš„appç›´æ¥ä½¿ç”¨åœ¨webviewçš„ä»£ç†ä¸­é€šè¿‡æ‹¦æˆªçš„æ–¹å¼ä¸nativeè¿›è¡Œäº¤äº’ï¼Œé€šå¸¸æ˜¯é€šè¿‡æ‹¦æˆªurl schemeåˆ¤æ–­æ˜¯å¦æ˜¯æˆ‘ä»¬éœ€è¦æ‹¦æˆªå¤„ç†çš„urlåŠå…¶æ‰€å¯¹åº”çš„è¦å¤„ç†çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆã€‚ä»»æ„ç‰ˆæœ¬éƒ½æ”¯æŒã€‚</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">2ã€iOS7ä¹‹åå‡ºäº†JavaScriptCore.frameworkç”¨äºä¸JSäº¤äº’ï¼Œä½†æ˜¯ä¸æ”¯æŒiOS6ï¼Œå¯¹äºè¿˜éœ€è¦æ”¯æŒiOS6çš„appï¼Œå°±ä¸èƒ½è€ƒè™‘è¿™ä¸ªäº†ã€‚è‹¥éœ€è¦äº†è§£ï¼Œçœ‹æœ€åçš„æ¨èé˜…è¯»ã€‚</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">3ã€WebViewJavascriptBridgeå¼€æºåº“ä½¿ç”¨ï¼Œæœ¬è´¨ä¸Šï¼Œå®ƒä¹Ÿæ˜¯é€šè¿‡webviewçš„ä»£ç†æ‹¦æˆªschemeï¼Œç„¶åæ³¨å…¥ç›¸åº”çš„JSã€‚</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">4ã€react-nativeï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰ç”¨è¿‡ï¼Œä¹Ÿä¸ä¼šç”¨ï¼ˆğŸ˜ï¼‰ã€‚</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">æˆ‘é€‰ç”¨çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åŒ… WebViewJavascriptBridgeï¼ŒWebViewJavascriptBridgeæ˜¯æ”¯æŒåˆ°iOS6ä¹‹å‰çš„ç‰ˆæœ¬çš„ï¼Œç”¨äºæ”¯æŒnativeçš„iOSä¸javascriptäº¤äº’ã€‚å¦‚æœéœ€è¦æ”¯æŒåˆ°iOS6ä¹‹å‰çš„appï¼Œä½¿ç”¨å®ƒæ˜¯å¾ˆä¸é”™çš„ã€‚<br>WebViewJavascriptBridgeçš„ä½¿ç”¨æ–¹æ³•æˆ‘è¿™è¾¹å°±ä¸å¤šè¯´ï¼Œå› ä¸ºç”¨æ³•æ™šä¸Šå†™çš„æ¯”æˆ‘è¯¦ç»†çš„å¤ªå¤šäº†ï¼Œæˆ‘ä¸»è¦å†™å‡ ç‚¹æˆ‘ä½¿ç”¨ä¸­é‡åˆ°çš„å‘ï¼Œæ–¹ä¾¿å¤§å®¶é‡åˆ°çš„æ—¶å€™å¯ä»¥å‚è€ƒã€‚</p><pre class="hljs objectivec" style="padding: 15px; margin-bottom: 20px; line-height: 1.42857; overflow-wrap: normal; color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); text-align: start; text-size-adjust: auto; word-break: break-word !important;"><code class="objectivec" style="font-size: 13px; white-space: pre; border: none; vertical-align: middle;"><span class="hljs-comment" style="color: rgb(146, 146, 146);">//æ‰“å¼€è°ƒè¯•ä¿¡æ¯</span>
    [WebViewJavascriptBridge enableLogging];
    
    <span class="hljs-comment" style="color: rgb(146, 146, 146);">// è¿™æ˜¯ä½¿ç”¨ç±»æ–¹æ³•åˆ›å»ºä¸€ä¸ªWebViewJavascriptBridgeå¯¹è±¡ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªblockç±»å‹çš„handleã€‚è¿™ä¸ªhandleä¸»è¦æ˜¯ç”¨æ¥æ¥æ”¶JavaScripté‡Œé¢é€šè¿‡sendæ–¹æ³•ä¼ è¿‡æ¥çš„æ¶ˆæ¯çš„ï¼Œè¿™é‡Œçš„handleé‡Œé¢çš„å‚æ•°ä¸JavaScriptä¸­sendæ–¹æ³•é‡Œé¢çš„å‚æ•°å¯¹åº”ã€‚</span>
    _bridge = [WebViewJavascriptBridge bridgeForWebView:_webArray[_count] webViewDelegate:<span class="hljs-keyword" style="color: rgb(198, 120, 221);">self</span> handler:^(<span class="hljs-keyword" style="color: rgb(198, 120, 221);">id</span> data, WVJBResponseCallback responseCallback) {
        
    }];
    
    [_bridge registerHandler:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"oc2js"</span> handler:^(<span class="hljs-keyword" style="color: rgb(198, 120, 221);">id</span> data, WVJBResponseCallback responseCallback) {
        
        responseCallback(<span class="hljs-string" style="color: rgb(152, 195, 121);">@"Response from testObjcCallback"</span>);
    }];
    <span class="hljs-comment" style="color: rgb(146, 146, 146);">//data å°±æ˜¯åå°jsä¼ è¿‡æ¥çš„æ•°æ®</span>
    [_bridge registerHandler:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"js2oc"</span> handler:^(<span class="hljs-keyword" style="color: rgb(198, 120, 221);">id</span> data, WVJBResponseCallback responseCallback) {}];
</code></pre>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">1ã€åå°dataä¼ è¿‡æ¥çš„åº”è¯¥æ˜¯ä¸€ä¸ªjsonä¸²ï¼Œocç«¯æ”¶åˆ°dataåæ‰“å°ä¼šå‘ç°å…¶ä¸­å¤šäº†å¾ˆå¤šçš„åæ–œæ ï¼Œå°¤å…¶æ˜¯jsonä¸­çš„urlçœ‹ä¸Šå»ä¼šå¾ˆä¹±ï¼Œè€Œä¸”æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œè¿™é‡Œæˆ‘æ‹¿æˆ‘é¡¹ç›®ä¸­çš„åˆ†äº«ç”¨åˆ°çš„å‚æ•°ä½œä¸ºä¾‹å­ï¼š</p><pre class="hljs objectivec" style="padding: 15px; margin-bottom: 20px; line-height: 1.42857; overflow-wrap: normal; color: rgb(171, 178, 191); background-color: rgb(40, 44, 52); text-align: start; text-size-adjust: auto; word-break: break-word !important;"><code class="objectivec" style="font-size: 13px; white-space: pre; border: none; vertical-align: middle;"> [_bridge registerHandler:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"js2oc"</span> handler:^(<span class="hljs-keyword" style="color: rgb(198, 120, 221);">id</span> data, WVJBResponseCallback responseCallback) {
        
        <span class="hljs-keyword" style="color: rgb(198, 120, 221);">if</span>(data){
            
            <span class="hljs-built_in" style="color: rgb(230, 192, 123);">NSLog</span>(<span class="hljs-string" style="color: rgb(152, 195, 121);">@"data == %@"</span>,data);
            
            SBJsonParser *json = [[SBJsonParser alloc]init];
            <span class="hljs-built_in" style="color: rgb(230, 192, 123);">NSMutableDictionary</span> *dict = [json objectWithString:data];
            <span class="hljs-built_in" style="color: rgb(230, 192, 123);">NSString</span> *method = [dict objectForKey:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"method"</span>];
            <span class="hljs-built_in" style="color: rgb(230, 192, 123);">NSDictionary</span> *optionDict = [dict objectForKey:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"option"</span>];
            <span class="hljs-keyword" style="color: rgb(198, 120, 221);">if</span> ([method isEqualToString:<span class="hljs-string" style="color: rgb(152, 195, 121);">@"share"</span>]) {
                
                _shareurl = optionDict[<span class="hljs-string" style="color: rgb(152, 195, 121);">@"shareurl"</span>];
                _shareimage = optionDict[<span class="hljs-string" style="color: rgb(152, 195, 121);">@"shareimage"</span>];
                _sharetitle = optionDict[<span class="hljs-string" style="color: rgb(152, 195, 121);">@"sharetitle"</span>];
                _sharedesc = optionDict[<span class="hljs-string" style="color: rgb(152, 195, 121);">@"sharedesc"</span>];
                <span class="hljs-comment" style="color: rgb(146, 146, 146);">//è°ƒç”¨åˆ†äº«æ–¹æ³•</span>
                [<span class="hljs-keyword" style="color: rgb(198, 120, 221);">self</span> showShareActionSheet:<span class="hljs-keyword" style="color: rgb(198, 120, 221);">self</span>.view];   
            }   
            }
    }];
   
</code></pre>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">è¿™é‡Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ§åˆ¶å°æ‰“å°çš„ä¿¡æ¯</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">WVJB RCVD: {"callbackId":"cb_1_1477476427944","handlerName":"js2oc","data":"{"method":"share","option":{"sharetitle":"çˆ±å¥‡è‰ºé»„é‡‘æœˆå¡ï¼Œåƒç§¯å˜å•†å“æ¨è","sharedesc":" ","shareurl":"
				<a href="https://link.jianshu.com/?t=http://m.qjbian.com/f/s/p/199/400" target="_blank" rel="nofollow" style="color: rgb(49, 148, 208); cursor: pointer;">http://m.qjbian.com/f/s/p/199/400</a>","shareimage":"
				<a href="https://link.jianshu.com/?t=http://img.qjbian.com/backend/201609/B1537076867_426831_200x200.jpg" target="_blank" rel="nofollow" style="color: rgb(49, 148, 208); cursor: pointer;">http://img.qjbian.com/backend/201609/B1537076867_426831_200x200.jpg</a>"}}"}<br>data == {"method":"share","option":{"sharetitle":"çˆ±å¥‡è‰ºé»„é‡‘æœˆå¡ï¼Œåƒç§¯å˜å•†å“æ¨è","sharedesc":" ","shareurl":"
				<a href="https://link.jianshu.com/?t=http://m.qjbian.com/f/s/p/199/400" target="_blank" rel="nofollow" style="color: rgb(49, 148, 208); cursor: pointer;">http://m.qjbian.com/f/s/p/199/400</a>","shareimage":"
				<a href="https://link.jianshu.com/?t=http://img.qjbian.com/backend/201609/B1537076867_426831_200x200.jpg" target="_blank" rel="nofollow" style="color: rgb(49, 148, 208); cursor: pointer;">http://img.qjbian.com/backend/201609/B1537076867_426831_200x200.jpg</a>"}}</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">å¯ä»¥çœ‹å‡ºæ‰“å°å‡ºæ¥çš„dataå°±æ˜¯ä¸ªå®Œæ•´çš„jsonæ•°æ®ï¼Œä½†æ˜¯å¦‚æœç›´æ¥è§£æè¿™ä¸ªjsonæ•°æ®å°±ä¼šå‘ç°å¾—åˆ°çš„æ•°æ®æ˜¯å¤šäº†å¾ˆå¤šâ€œ\â€çš„ï¼Œå› ä¸ºå®é™…å¾—åˆ°çš„æ•°æ®æ˜¯ä¸Šé¢é‚£è¡Œæ‰“å°å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å¯¹å¾—åˆ°çš„jsonæ•°æ®åšå¤„ç†ï¼Œæˆ‘é€‰ç”¨çš„æ˜¯ç”¨SBJsonå»è§£æï¼Œè¿™æ ·å¯ä»¥åœ¨è§£æçš„è¿‡ç¨‹ä¸­å»æ‰â€œ\â€ã€‚<br>2ã€åœ¨ä½ çš„htmlç«¯ï¼Œåˆ‡è®°æ¯ä¸ªéœ€è¦å’Œocè¿›è¡Œäº¤äº’çš„é¡µé¢ä¸­éƒ½éœ€è¦å…ˆæ‰§è¡Œ<br>WebViewJavascriptBridgeçš„æ³¨å†Œï¼Œä¸ç„¶ä¼šäº¤äº’ä¼šå¤±æ•ˆã€‚</p>
			<p style="margin-bottom: 25px; caret-color: rgb(47, 47, 47); color: rgb(47, 47, 47); font-size: 16px; text-align: start; text-size-adjust: auto; word-break: break-word !important;">æš‚æ—¶å°±é‡åˆ°è¿™äº›ï¼Œåç»­é‡åˆ°ä¼šç»§ç»­è¡¥å……ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤šè¡¥å……ï¼Œå…±åŒè¿›æ­¥ğŸ˜</p>
		</div>
	</body>

</html>